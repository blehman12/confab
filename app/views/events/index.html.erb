<% provide(:title, 'Events') %>
<h2>Events</h2>
<div><%= render 'events/search' %></div>

<div>
<% form_tag events_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search], placeholder: "Search Events" %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>
</div>
<br>
<div>
  <% if @events %>
    <ul class="users">
      <h5 style="display:inline">Sort By:</h5>
      <tr>
        <th><%= sortable "name", "Name" %></th> |
        <th><%= sortable "start", "Start Date" %></th> |
        <th><%= sortable "theme", "Theme" %></th> |
        <th><%= sortable "category", "Category" %></th> |
        <th><%= sortable "tags", "Tags" %></th>
      </tr>
      <%= render @events %>
    </ul>
    <span class="pagination"><%= will_paginate @events, container: false %></span>
  <% else %>
    <h5>No specialties found.</h5>
  <% end %>
</div>

<div class="table-responsive" style="display:none">
<table class="table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Date</th>
      <th>Location</th>
      <th>Theme</th>
      <th>Category</th>
      <th>Subcategories</th>
      <th>Tags</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @events.each do |event| %>
      <tr>
        <td><%= link_to event.name, event %></td>
        <td><%= @date_range %></td>
        <td><%= event.location %></td>
        <td><%= event.theme %></td>
        <td><%= event.category %></td>
        <td><%= event.subcategoryA %> -
          <%= event.subcategoryB %> -
          <%= event.subcategoryC %>
        </td>
        <td><%= event.tags %></td>
        <% if current_user.admin? || current_user?(event.user) %>
          <td><%= link_to "edit", edit_event_path(event) %> |
          <%= link_to "delete", event, method: :delete,
                                  data: { confirm: "You sure?" } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<%= link_to 'New Event', new_event_path %>
